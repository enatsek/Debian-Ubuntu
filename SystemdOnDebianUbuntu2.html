<!DOCTYPE html> <html> <head> <meta charset="UTF-8"></head><body><H1>SystemdOnDebianUbuntu2 Other Systemd Components on Debian and Ubuntu
</H1><p> <H4><a href="javascript:myFunction('Div1')">Copyright (C) 2024 Exforge exforge@x386.org
</a> </H4><div id="Div1" style="margin-left:1%;"><pre ># - This document is free text: you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation, either version 3 of the License, or
# any later version.
#
# - This document is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
# GNU General Public License for more details.
#
# - You should have received a copy of the GNU General Public License
# along with this program.  If not, see &lt;https://www.gnu.org/licenses/&gt;.
</pre> </div> </p>
<p> <H4><a href="javascript:myFunction('Div2')"> 0. Specs
</a> </H4><div id="Div2" style="margin-left:1%;"><pre ><B><span style="Font-Family:Verdana">#-- 0.1. Intro
</B></span># - The first Systemd tutorial, namely Systemd On Debian/Ubuntu was about 
# systemd's init and service management properties.
#
# - Systemd has more than that, it has a lot of other services and tools. This 
# tutorial covers them.
#
# - You may think that I like systemd. Not at all, I don't like it, more precisely
# I hate it. Just because my favorite distros (Debian and Ubuntu) uses it, I have
# to learn it too.
# 
<B><span style="Font-Family:Verdana">#-- 0.2. Sources
</B></span># - For this tutorial I tried another approach. Instead of searching information 
# from the internet and the books; I asked questions to ChatGPT and collected the
# answers.
# - Unfortunately (or maybe fortunately) there were a lot of wrong information 
# from ChatGPP. I checked every answer before I prepare this tutorial.
# - AI still needs a lot of work before becoming really useful.
#
</pre> </div> </p>
<p> <H4><a href="javascript:myFunction('Div3')"> 1. Services
</a> </H4><div id="Div3" style="margin-left:1%;"><pre ># Debian 12 and Ubuntu 22.04 Server has the following systemd services by
# default:
#
# systemd-journald
# systemd-logind
# systemd-networkd
# systemd-resolved
# systemd-timesyncd
# systemd-udevd
# systemd-tmpfiles
# systemd-binfmt
# systemd-modules-load
# systemd-random-seed
# systemd-remount-fs
# systemd-sysctl
# systemd-sysusers
</pre> </div> </p>
<p> <H4><a href="javascript:myFunction('Div4')"> 1.1. systemd-journald
</a> </H4><div id="Div4" style="margin-left:1%;"><pre ># systemd-journald is the component of the systemd suite responsible for
# collecting, storing, and managing log data on Linux systems. It is the default
# logging system on systems using systemd, including Debian and Ubuntu Linux
# distributions.
#
<B><span style="Font-Family:Verdana">#-- 1.1.1. Logs
</B></span># - Stores log data in binary format
# - log data stored in the /var/log/journal/ directory. 
# - Log files undergo automatic rotation and compression.
# - Includes rate-limiting mechanisms to prevent logs from being flooded in
# high-traffic situations.
# - The journalctl command is used to query and display log data managed by
# systemd-journald. 
# - Manages user specific logs too.
#
<B><span style="Font-Family:Verdana">#-- 1.1.2. Configuration
</B></span># Configuration file is /etc/systemd/journald.conf file. 
<code><span style="Color:MediumSeaGreen"># /etc/systemd/journald.conf
&lsqb;Journal&rsqb;
# Specify the maximum disk space that journal files may use.
# The default is infinity (i.e., unlimited).
SystemMaxUse=50M
#
# Specify the maximum disk space that should be used for runtime logs.
RuntimeMaxUse=50M
#
# Specify the maximum disk space that may be used for log data.
# This controls both system and runtime logs.
# The default is infinity (i.e., unlimited).
MaxUse=100M
#
# Specify the maximum number of individual journal files to retain.
# Older files are deleted when the limit is reached.
SystemMaxFiles=100
#
# Specify the maximum number of runtime journal files to retain.
# Older files are deleted when the limit is reached.
RuntimeMaxFiles=100
#
# Specify the maximum number of journal files to retain.
# This controls both system and runtime logs.
# Older files are deleted when the limit is reached.
MaxFiles=200
#
# Compress and store journal files in a read-only archive directory.
# Uncomment the line below and specify the archive directory path.
# This reduces the disk space usage but prevents further writes to the archived 
# logs.
# Also, consider setting "Storage=auto" if using this option.
# Compress=yes
# SystemKeepFree=50M
# RuntimeKeepFree=50M
# KeepFree=100M
#
# Specify a higher verbosity level for detailed log information.
# Options: "emerg", "alert", "crit", "err", "warning", "notice", "info", "debug".
# The default is "info".
# LogLevel=debug
#
# Specify the maximum runtime for system services to finish startup.
# This helps in capturing early boot logs completely.
# The default is 30s.
# RuntimeMaxSec=30s
#
# Enable persistent journal storage across reboots.
# The default is "auto".
# Storage=auto
#
# Disable persistent journal storage.
# Storage=none
#
# Specify the maximum size of individual journal files.
# The default is 8M.
# SystemMaxFileSize=16M
# RuntimeMaxFileSize=16M
# MaxFileSize=32M
#
# Specify the rate limit for journal events in bytes per second.
# The default is 1M.
# RateLimitBurst=2M
# RateLimitIntervalSec=30s
#
# Enable forwarding of journal logs to syslog.
# ForwardToSyslog=yes
#
# Specify the syslog identifier to use when forwarding logs.
# ForwardToSyslogIdentifier=journal
</span></code>#
# Activate changed configuration:
<code><span style="Color:DodgerBlue">sudo systemctl restart systemd-journald
</span></code></pre> </div> </p>
<p> <H4><a href="javascript:myFunction('Div5')"> 1.2. systemd-logind
</a> </H4><div id="Div5" style="margin-left:1%;"><pre >#
# systemd-logind is a component of the systemd system and service manager that
# manages user sessions and seat devices on Linux systems. It is responsible for
# handling user logins, seat management (logical grouping of input and output
# devices), and various aspects of the user environment.
#
<B><span style="Font-Family:Verdana">#-- 1.2.1. Key Points
</B></span># - Tracks user sessions, allowing the system to associate processes with
# specific user logins.
# - Involved in power management tasks. Can apply inhibition of shutdown and
# sleep.
# - Keeps track of user sessions and provides information about active and 
# inactive sessions.
# - Integrates with desktop environments and display managers, allowing for
# better control over user sessions and seat devices.
#
<B><span style="Font-Family:Verdana">#-- 1.2.2. Configuration
</B></span># Configuration file: /etc/systemd/logind.conf file.
#
# Example configuration:
<code><span style="Color:MediumSeaGreen"># /etc/systemd/logind.conf
#
&lsqb;Login&rsqb;
# This controls whether systemd-logind shall remove all sessions and seats
# on logout. This includes killing all processes in these sessions and
# stopping any session scope units that may be active. Note that enabling
# this setting may result in multiple sessions being created and removed
# on login and logout of a user.
#Default: yes
KillUserProcesses=yes
#
# ConsoleKit compatibility
# In addition to SessionsActivated, which can be used to check whether a
# user session is registered with systemd-logind, this switch enables
# basic ConsoleKit compatibility.
#Default: yes
ConsoleKitCompatibility=yes
#
# ReserveVT=N tells logind to leave N VTs unbound from it and do not
# release them from its VT pool. This option is only useful for embedded
# and appliance-like systems where the system console shall always be
# bound to VT number 1 or similar. In this case, set this to 1.
#Default: 6
ReserveVT=6
#
# Kill only user processes that are part of the same session as the
# service that is being terminated. Setting this to "yes" is equivalent
# to enabling KillUserProcesses=yes.
#Default: no
KillOnlyUsers=no
#
# Enable power management features when requested by a graphical session
# (with "HandlePowerKey=ignore" in logind.conf). This includes
# logind's inhibitors mechanism that is used to block system sleep/shutdown
# via inhibitors of running multimedia sessions.
#Default: yes
HandlePowerKey=yes
#
# HandleRebootKey and HandlePowerKey are not handled by logind when
# the caller is not root or a member of the group root. The user is expected
# to start "systemctl start shutdown.target", "systemctl start reboot.target"
# manually in the session.
# NOTE: PowerKey and RebootKey must be set to "ignore" to disable any
# handling, even if HandlePowerKey/HandleRebootKey is set to "yes".
HandleSuspendKey=yes
HandleHibernateKey=yes
HandleLidSwitch=yes
#
# Disable user switching
# Allow users who are logged in on one virtual terminal to switch to
# another one.
#Default: yes
#AllowUserSwitching=yes
#
# Enable user switching
#DisallowUserSwitching=no
#
# Handle displays that are attached to seats (such as graphics cards).
# If all seats are taken, users with displays attached to a seat are not
# allowed to log in.
#Default: yes
#Multiseat=no
#
# Handle automatic handling of display numbering, based on the seat and
# hardware ID of the graphics card. See "systemd-localed.service" for details.
#Default: no
#AutomaticVTSwitch=no
#
# Controls whether logind shall use ACLs and other mechanisms to control the
# access to the devices seats depend on. ACLs and other controls might add
# security, but may lead to problems when running certain setups (e.g.
# multiseat). Turn this off if you experience problems.
#Default: yes
#RestrictAccessToVT=yes
</span></code>#
# Activate new conf
<code><span style="Color:DodgerBlue">sudo systemctl restart systemd-logind
</span></code></pre> </div> </p>
<p> <H4><a href="javascript:myFunction('Div6')"> 1.3. systemd-networkd
</a> </H4><div id="Div6" style="margin-left:1%;"><pre >#
# This service is not active in default Debian 12 installation.
#
# Ubuntu installations use netplan as an interface to networkd.
#
# systemd-networkd is a component of the systemd suite that manages network
# configurations on Linux systems. It is designed to provide a simple and
# efficient way to configure and manage network interfaces, including wired and
# wireless connections. 
#
<B><span style="Font-Family:Verdana">#-- 1.3.1. Key Points
</B></span># - Configures various link settings, including IP addresses, gateways, DNS
# servers, and other network parameters.
# - Supports the configuration of bridges and VLANs
# - Integrates with systemd-resolved to provide DNS resolution services.
# - Can dynamically discover and configure network interfaces.
#
<B><span style="Font-Family:Verdana">#-- 1.3.2. Configuration
</B></span># - Relies on configuration files (with a .network extension) in the 
# /etc/systemd/network/ directory. 
#
# A simple systemd-networkd configuration file for DHCP
<code><span style="Color:MediumSeaGreen"># /etc/systemd/network/eth0.network
&lsqb;Match&rsqb;
Name=eth0
#
&lsqb;Network&rsqb;
DHCP=yes
</span></code>#
# This configuration file tells systemd-networkd to apply the settings to the
# network interface named "eth0" and to use DHCP for IP configuration.
#
# A detailed configuration with a static IP address, DNS settings, and
# additional options for a more comprehensive configuration.
<code><span style="Color:MediumSeaGreen"># /etc/systemd/network/20-wired.network
&lsqb;Match&rsqb;
Name=enp0s3
#
&lsqb;Network&rsqb;
Address=192.168.1.2/24
Gateway=192.168.1.1
DNS=8.8.8.8
DNS=8.8.4.4
Domains=mydomain.local
NTP=pool.ntp.org
#
&lsqb;Link&rsqb;
MTUBytes=1400
MACAddressPolicy=persistent
</span></code># 
# - Address: The static IP address and subnet mask.
# - Gateway: The default gateway.
# - DNS: DNS server addresses.
# - Domains: Search domains for DNS resolution.
# - NTP: NTP server for time synchronization.
# - MTUBytes: Maximum Transmission Unit size.
# - MACAddressPolicy: Set to persistent to use a stable MAC address.
#
# 1.3.3. Important Notes
# - Please remember that; Debian 12 does not use systemd-networkd; and Ubuntu
# 22.04 uses Netplan for network configuration. Netplan generates networkd 
# configuration files on /run/systemd/network directory; you are not supposed 
# to change those files.
# 
</pre> </div> </p>
<p> <H4><a href="javascript:myFunction('Div7')"> 1.4. systemd-resolved
</a> </H4><div id="Div7" style="margin-left:1%;"><pre >#
# This service is not active in a default Debian 12 installation.
#
# systemd-resolved is a systemd service that provides network name resolution
# services on Linux systems. It is responsible for DNS resolution and provides a
# local DNS stub resolver and caching daemon. 
#
<B><span style="Font-Family:Verdana">#-- 1.4.1. Key Points
</B></span># - Runs as a daemon process.
# - Acts as a local DNS stub resolver, which means it forwards DNS queries to
# DNS servers on behalf of client applications.
# - Caches DNS responses locally to reduce the need for repeated DNS queries.
# - Supports Multicast DNS (mDNS), allowing resolution of hostnames in the local
# network without relying on a dedicated DNS server.
# - Can be configured to use DNS over TLS (DoT)
# - Can dynamically reconfigure itself based on changes in network
# configuration, such as changes in DNS server addresses or domain search lists.
# - Often used in conjunction with systemd-networkd
# - Integrates with the Name Service Switch (NSS) configuration
# - resolvectl command is used to query and interact with systemd-resolved.
#
<B><span style="Font-Family:Verdana">#-- 1.4.2. Configuration
</B></span># The configuration file is /etc/systemd/resolved.conf.
#
# Simple example configuration
<code><span style="Color:MediumSeaGreen"># /etc/systemd/resolved.conf
#
ini
&lsqb;Resolve&rsqb;
DNS=8.8.8.8 8.8.4.4
DNSOverTLS=yes
DNSSEC=yes
</span></code>#
# Detailed example configuration
<code><span style="Color:MediumSeaGreen"># /etc/systemd/resolved.conf
#
&lsqb;Resolve&rsqb;
# Specify DNS servers to use for name resolution.
# Multiple servers can be separated by spaces.
# You can use IPv4 and IPv6 addresses.
# Example DNS settings for Google Public DNS:
# DNS=8.8.8.8 8.8.4.4
# DNS=2001:4860:4860::8888 2001:4860:4860::8844
# 
# Enable DNS over TLS (DoT) for encrypted and authenticated communication with 
# DNS servers.
# This enhances the security and privacy of DNS queries.
# DNSOverTLS=yes
# 
# Specify the DNSSEC (DNS Security Extensions) validation mode.
# Valid options: "allow-downgrade", "opportunistic", "require", and "no".
# DNSSEC=yes
# 
# Enable DNSSEC negative trust anchors.
# DNSSECNegativeTrustAnchors=yes
# 
# Specify the domains for which DNS queries should use DNS over TLS.
# Domains using DoT will not fall back to plaintext DNS.
# DNSOverTLSDomains=example.com test.net
# 
# Specify the search domains for unqualified hostnames.
# Multiple domains can be separated by spaces.
# SearchDomains=example.com subdomain.example.net
# 
# Specify the domains for which LLMNR (Link-Local Multicast Name Resolution) 
# should be used.
# LLMNR=yes
# 
# Specify the multicast DNS (mDNS) domains.
# mDNS=yes
# 
# Specify the time to live (TTL) for positive cache entries in seconds.
# CacheTTL=120
# 
# Specify the TTL for negative cache entries in seconds.
# NegativeCacheTTL=120
# 
# Specify the maximum size of the cache in kilobytes.
# CacheLimit=512M
# 
# Specify the maximum number of DNS messages in transit.
# Messages max transit=4096
# 
# Enable DNS fallback in case the resolved server cannot be contacted.
# FallbackDNS=8.8.8.8 8.8.4.4
# 
# Enable caching DNS negative responses.
# CacheNegative=yes
# 
# Enable automatic reconfiguration of resolved in response to network changes.
# DynamicUser=yes
</span></code></pre> </div> </p>
<p> <H4><a href="javascript:myFunction('Div8')"> 1.5. systemd-timesyncd
</a> </H4><div id="Div8" style="margin-left:1%;"><pre >#
# systemd-timesyncd is a component of the systemd suite designed to synchronize
# the system clock across a network, ensuring accurate timekeeping on Linux
# systems. It acts as a simple NTP (Network Time Protocol) client, allowing your
# system to regularly synchronize its clock with remote NTP servers.
#
<B><span style="Font-Family:Verdana">#-- 1.5.1. Key Points
</B></span># - Runs as a service.
# - Functions as a lightweight NTP client, periodically querying remote NTP
# servers to obtain accurate time information.
# - timedatectl command provides information about the system clock and its
# synchronization status.
#
<B><span style="Font-Family:Verdana">#-- 1.5.2. Configuration
</B></span># Example configuration
<code><span style="Color:MediumSeaGreen"># /etc/systemd/timesyncd.conf
&lsqb;Time&rsqb;
# Specify the NTP servers to use for time synchronization.
# Multiple servers can be specified, separated by spaces.
# Example NTP servers:
# NTP=pool.ntp.org time.google.com
#
# Specify the time to wait for the initial synchronization in seconds.
# The default is 1 minute.
# TimeoutStartSec=1min
#
# Specify the interval between updates.
# The default is 5 minutes.
# PollIntervalMinSec=5min
#
# Enable or disable systemd-timesyncd's NTP server.
# The default is "no".
# EnableNTP=yes
#
# Enable or disable setting the system clock from the RTC.
# The default is "yes".
# RTCUseUtc=yes
</span></code>#
# - Detailed Example
<code><span style="Color:MediumSeaGreen"># /etc/systemd/timesyncd.conf
#
&lsqb;Time&rsqb;
# Specify the NTP servers to use for time synchronization.
# Multiple servers can be specified, separated by spaces.
# Example NTP servers:
# NTP=pool.ntp.org time.google.com
NTP=pool.ntp.org
#
# Specify the time to wait for the initial synchronization in seconds.
# The default is 1 minute.
# TimeoutStartSec=1min
#
# Specify the interval between updates.
# The default is 5 minutes.
# PollIntervalMinSec=5min
#
# Enable or disable systemd-timesyncd's NTP server.
# The default is "no".
# EnableNTP=yes
#
# Enable or disable setting the system clock from the RTC.
# The default is "yes".
# RTCUseUtc=yes
#
# Specify the maximum allowed adjustment in seconds.
# If the difference between the system clock and the NTP server exceeds this 
# value, a larger step will be used to correct the time.
# The default is 0.2 seconds.
# MaxOffsetSec=1
#
# Specify the maximum acceptable root distance.
# This is the maximum possible error due to the network latency in seconds.
# The default is 5 seconds.
# RootDistanceMaxSec=5
#
# Specify the maximum acceptable polling interval for reaching out to NTP 
# servers.
# The default is 64 seconds.
# PollIntervalMaxSec=64
#
# Specify the minimum acceptable polling interval.
# The default is 32 seconds.
# PollIntervalMinSec=32
</span></code></pre> </div> </p>
<p> <H4><a href="javascript:myFunction('Div9')"> 1.6. systemd-udevd
</a> </H4><div id="Div9" style="margin-left:1%;"><pre >#
# systemd-udevd is a component of the systemd suite, responsible for handling
# device events and managing the device nodes in the Linux kernel's /dev
# directory. It is a dynamic device management daemon that monitors hardware
# changes and triggers actions based on device-related events.
#
<B><span style="Font-Family:Verdana">#-- 1.6.1. Key Points
</B></span># - Monitors the Linux kernel's netlink interface for device-related events,
# such as the discovery of new devices or the removal of existing devices.
# - Dynamically manages the device nodes in the /dev directory.
# - Uses a rule-based configuration system to define how it should respond to
# specific device events. 
# - Allows for persistent device naming based on attributes like MAC addresses
# or other unique identifiers.
# - Maintains a device database (/run/udev/data) that stores device information.
#
<B><span style="Font-Family:Verdana">#-- 1.6.2. Configuration
</B></span># - Rules written in /etc/udev/rules.d/ directory define
# - Rules can include actions such as running scripts, creating symlinks, 
# setting permissions, and more.
# - Rules specify actions to be taken for specific devices. Common actions
# include "add," "remove," "change," and "move."
# - Rules can execute custom scripts or commands in response to events, allowing
# for fine-grained customization of device handling.
# 
# - An example rule that runs a script when a USB drive with a specific vendor
# ID is inserted:
#
<code><span style="Color:MediumSeaGreen"># /etc/udev/rules.d/80-custom-network.rules
#
# Rule for a USB drive with vendor ID 1234
SUBSYSTEM=="block", ACTION=="add", ENV{ID_VENDOR_ID}=="1234", RUN+="/path/to/custom-script.sh"
</span></code>#     
# SUBSYSTEM=="block": The rule applies to block devices.
# ACTION=="add": The rule triggers when a new block device is added.
# ENV{ID_VENDOR_ID}=="1234": Vendor ID should be 1234.
# RUN+="/path/to/custom-script.sh": The script to run
#
# Various conditions can be used  to match devices based on attributes such as
# subsystem, kernel, device name, and more.
#
# udev provides a set of variables that you can use in your rules. Like: 
# SUBSYSTEM, KERNEL, ID_VENDOR_ID, ID_MODEL_ID
</pre> </div> </p>
<p> <H4><a href="javascript:myFunction('Div10')"> 1.7.. systemd-tmpfiles
</a> </H4><div id="Div10" style="margin-left:1%;"><pre ># systemd-tempfiles is a component of the systemd suite, and it is responsible
# for managing temporary files and directories on a Linux system. It provides a
# mechanism for creating and cleaning up temporary files and directories at
# system startup and during runtime. 
#
<B><span style="Font-Family:Verdana">#-- 1.7.1. Configuration
</B></span># - Configuration files are in /usr/lib/tmpfiles.d/ and /etc/tmpfiles.d/
# directories.
#
# - Configuration Format:
# &lsqb;Type&rsqb; Path Mode Age Argument
#
# Type: Specifies the type of operation (create, remove, modify).
# Path: Specifies the path to the file or directory.
# Mode: Specifies the permissions mode for the file or directory.
# Age: Specifies how long the file or directory should be retained before 
# removal.
# Argument: Additional arguments or options, depending on the type.
#
# - Example configuration:
#
<code><span style="Color:MediumSeaGreen"># /etc/tmpfiles.d/my_temporary_files.conf
#
# Create a directory with specific permissions
d /var/my_temp_dir 0755 root root -
#
# Create an empty file with specific permissions
f /var/my_temp_file 0644 root root -
#
# Remove files older than 7 days in a specific directory
D /var/log/my_logs/*.log - - - 7d
</span></code>#
# d: Create a directory.
# f: Create an empty file.
# D: Remove files older than a specified age.
# F: Create file with contents
# L: Create symlink
# c: Create character device
# b: Create block device)
#
<B><span style="Font-Family:Verdana">#-- 1.7.2. Examples
</B></span>#
# Create a temporary directory at boot.
<code><span style="Color:MediumSeaGreen"># /etc/tmpfiles.d/my_temp_directory.conf
#
# Type 'd' indicates creating a directory
d /var/my_temp_directory 0755 root root -
</span></code>#
# d: Specifies that a directory should be created.
# /var/my_temp_directory: Path to the directory.
# 0755: Permissions (owner: read, write, execute; group and others: read, 
# execute).
# root root: Specifies the owner and group.
# - : No specific age for removal.
#
# Create an empty file with specific permissions.
<code><span style="Color:MediumSeaGreen"># /etc/tmpfiles.d/my_temp_file.conf
#
# Type 'f' indicates creating an empty file
f /var/my_temp_file 0644 root root -
</span></code>#
# f: Specifies that an empty file should be created.
# /var/my_temp_file: Path to the file.
# 0644: Permissions (owner: read, write; group and others: read).
# root root: Specifies the owner and group.
# -: No specific age for removal.
#
# Remove log files older than 7 days:
<code><span style="Color:MediumSeaGreen"># /etc/tmpfiles.d/remove_old_logs.conf
#
# Type 'D' indicates removing files older than a specified age
D /var/log/my_logs/*.log - - - 7d
</span></code>#
# D: Specifies that files older than a specified age should be removed.
# /var/log/my_logs/*.log: Path to the files (wildcards are allowed).
# - - - 7d: No specific permissions or owner; files older than 7 days will be 
# removed.
#
# Create a symbolic link:
<code><span style="Color:MediumSeaGreen"># /etc/tmpfiles.d/create_symlink.conf
#
# Type 'L' indicates creating a symbolic link
L /var/my_symlink - /var/my_target_file
</span></code>#
# Apply the changes
<code><span style="Color:DodgerBlue">sudo systemd-tmpfiles --create
</span></code></pre> </div> </p>
<p> <H4><a href="javascript:myFunction('Div11')"> 1.8. systemd-binfmt
</a> </H4><div id="Div11" style="margin-left:1%;"><pre >#
# The systemd-binfmt service is part of the systemd suite and is responsible 
# for handling binary formats. Binary formats are the different executable 
# file formats that a system can support. 
#
<B><span style="Font-Family:Verdana">#-- 1.8.1. Key Points
</B></span># - binfmt_misc in the Linux kernel allows the execution of binaries in non-
# native formats. 
#
# - Interpreters are programs that can execute binaries in specific formats. The
# systemd-binfmt service registers these interpreters with the kernel.
#
# - For binfmt_misc to work, the kernel must be compiled with support for
# CONFIG_BINFMT_MISC.
#
<B><span style="Font-Family:Verdana">#-- 1.8.2. Configuration
</B></span># - The configuration files are in /etc/binfmt.d/. Each configuration file 
# defines rules for handling specific binary formats. This directory is empty
# at default Debian 12 and Ubuntu 22.04 installations.
#
# - Configuration files follow a simple key-value format. Each rule defines the
# binary format and specifies the interpreter to use.
#
<code><span style="Color:MediumSeaGreen"># /etc/binfmt.d/my_format.conf
#
:my_format:M::\x7fELF\x01\x01\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x03\x00\x3e\x00:\xff\xff\xff\xff\xff\xff\xff\x00\xff\xff\xff\xff\xff\xff\xff\xff\xfe\xff\xff\xff:/usr/bin/my_interpreter:OC
</span></code>#
# - The last part of the configuration file specifies optional arguments for the
# interpreter. In the example, OC specifies that the interpreter should be
# called with the OC argument.
#
# Enable a binfmt rule
<code><span style="Color:DodgerBlue">sudo systemctl enable binfmt@my_format.service
</span></code>#
# Disable a binfmt rule
<code><span style="Color:DodgerBlue">sudo systemctl disable binfmt@my_format.service
</span></code>#
# Check the status of binfmt rules
<code><span style="Color:DodgerBlue">systemctl status binfmt@my_format.service
</span></code></pre> </div> </p>
<p> <H4><a href="javascript:myFunction('Div12')"> 1.9. systemd-modules-load
</a> </H4><div id="Div12" style="margin-left:1%;"><pre >#
# systemd-modules-load is a component of the systemd suite, responsible for
# loading kernel modules at system boot. 
#
# - Runs as a service (systemd-modules-load.service) and is typically started
# automatically during system boot.
#
# - The configuration files are in /etc/modules-load.d/ directory. Files in 
# /etc/modules-load.d/ specify which kernel modules should be loaded at boot 
# time. 
#
# Syntax is simple: each line represents the name of a module to be loaded.
#
<code><span style="Color:MediumSeaGreen"># /etc/modules-load.d/my_modules.conf
#
# Load the 'vboxdrv' module for VirtualBox
vboxdrv
</span></code>#
# - In addition to using the /etc/modules-load.d/ directory, Debian and Ubuntu
# systems traditionally had an /etc/modules file where you could list modules to
# be loaded. This file is still supported, but systemd-modules-load primarily
# uses the /etc/modules-load.d/ directory.
</pre> </div> </p>
<p> <H4><a href="javascript:myFunction('Div13')"> 1.10. systemd-random-seed
</a> </H4><div id="Div13" style="margin-left:1%;"><pre >#
# systemd-random-seed is a component of the systemd suite responsible for
# initializing the kernel's entropy pool with random data during the system's
# startup. The entropy pool is essential for generating cryptographic keys and
# ensuring the randomness of various cryptographic operations on a Linux system.
#
# - The primary purpose of systemd-random-seed is to initialize the kernel's
# entropy pool during the early boot phase. 
#
# - The kernel maintains an entropy pool that serves as a source of randomness
# for cryptographic operations. Having a sufficient amount of entropy is crucial
# for the security of the system.
#
# - Reads random data from /var/lib/systemd/random-seed and uses it to seed the
# kernel's entropy pool during the system's startup. This file is typically 
# created during the shutdown process and saved to preserve the entropy across
# reboots. This allows the system
#
# - The random data used to seed the entropy pool is collected from various
# sources, including interrupt timing, keyboard and mouse events, and other
# sources of hardware and environmental noise.
#
# - The seed file is restricted to ensure its security. It is owned by root and 
#  readable only by the root user.
#
# - systemd-random-seed operates during the early stages of the boot process,
# ensuring that the kernel's entropy pool is adequately seeded before
# cryptographic services and applications that rely on random data become
# active.
</pre> </div> </p>
<p> <H4><a href="javascript:myFunction('Div14')"> 1.11. systemd-remount-fs
</a> </H4><div id="Div14" style="margin-left:1%;"><pre >#
# The systemd-remount-fs service is part of the systemd suite and is responsible
# for remounting the root file system with specific mount options during the
# early boot process. This service is typically involved in adjusting the mount
# options for the root file system before other services are started, ensuring
# that the file system is mounted with the desired configuration.
#
# Key aspects of systemd-remount-fs:
#
# - The mount options applied by systemd-remount-fs are defined in the systemd 
# configuration, specifically in the /etc/systemd/system.conf file.
#
# - The /etc/systemd/system.conf file contains settings for the system manager,
# and it may include parameters related to the root file system's remounting.
#
<code><span style="Color:MediumSeaGreen"># /etc/systemd/system.conf snippet:
ini
&lsqb;Manager&rsqb;
#...
DefaultTimeoutStartSec=10s
DefaultTimeoutStopSec=10s
DefaultRestartSec=10s
DefaultStartLimitIntervalSec=10s
DefaultStartLimitBurst=5
DefaultLimitNOFILE=4096
DefaultLimitNPROC=4096
# Set root file system mount options
DefaultMountOptions=ro
</span></code>#
# - Changing the mount options with systemd-remount-fs can impact the behavior
# of the system during boot. For example, setting the root file system to be
# mounted read-only (ro) can be useful for checking and repairing the file
# system.
#
</pre> </div> </p>
<p> <H4><a href="javascript:myFunction('Div15')"> 1.12. systemd-sysctl
</a> </H4><div id="Div15" style="margin-left:1%;"><pre >#
# systemd-sysctl is a component of the systemd suite that provides a way to
# configure kernel parameters at runtime on Linux systems. It is a systemd
# service responsible for applying sysctl settings during the system's boot
# process. Sysctl settings are used to configure various aspects of the Linux
# kernel, influencing its behavior and performance.
#
# - The main sysctl configuration file is /etc/sysctl.conf. It can be used to
# set global sysctl settings. However, it is recommended to use the 
# /etc/sysctl.d/ directory for custom configurations.
#
# Example sysctl configuration file
<code><span style="Color:MediumSeaGreen"># /etc/sysctl.d/99-my-custom-settings.conf
#
# Increase the maximum number of file handles
fs.file-max=65536
#
# Enable TCP window scaling
net.ipv4.tcp_window_scaling=1
#
# Increase the maximum number of network connections
net.ipv4.ip_local_port_range=1024 65000
</span></code>#     
# - After modifying sysctl configuration files, you can apply the changes
# without rebooting by using the sysctl command:
#
<code><span style="Color:DodgerBlue">sudo sysctl --system
</span></code>#
# - The /usr/lib/sysctl.d/ directory contains default sysctl configuration files
# provided by packages. Files in this directory should not be modified, as
# changes may be overwritten during package updates.
#
</pre> </div> </p>
<p> <H4><a href="javascript:myFunction('Div16')"> 1.13. systemd-sysusers
</a> </H4><div id="Div16" style="margin-left:1%;"><pre ># systemd-sysusers is a utility that is part of the systemd suite, and it is
# responsible for creating and managing system users and groups during the early
# stages of system boot. It operates based on configuration files that define
# the users and groups to be created, their attributes, and other related
# settings. This tool is often used in conjunction with other systemd components
# to ensure consistent and predictable user and group management.
#
# - Configuration files are in /usr/lib/sysusers.d/ directory. Each file contains 
# instructions for creating or
# removing system users and groups.
#
#- Configuration files can also specify users and groups that should be removed.
# This allows for cleaning up obsolete or unnecessary users and groups.
#
# - Attributes such as UID (User ID), GID (Group ID), home directory, shell, and
# user comment can be specified in the configuration files.
#
# Example configuration file
<code><span style="Color:MediumSeaGreen"># /etc/sysusers.d/my_users.conf
#
u johndoe - John Doe:/home/johndoe:/bin/bash
g mygroup - My Group
</span></code>#
# - Applying Changes:
<code><span style="Color:DodgerBlue">sudo systemd-sysusers
</span></code></pre> </div> </p>
<p> <H4><a href="javascript:myFunction('Div17')"> 2. Tools
</a> </H4><div id="Div17" style="margin-left:1%;"><pre ><B><span style="Font-Family:Verdana">#-- 2.1. systemctl
</B></span>#
# systemctl is a command-line utility in Linux used to control and query the
# state of the systemd system and service manager. It is a central tool for
# managing services, viewing logs, and interacting with the initialization
# system on systems using systemd as the init system. 
#
# Check the status of a service:
<code><span style="Color:DodgerBlue">systemctl status apache2
</span></code>#
# Stop a service:
<code><span style="Color:DodgerBlue">sudo systemctl stop apache2
</span></code>#
# Start a service:
<code><span style="Color:DodgerBlue">sudo systemctl start apache2
</span></code>#
# Disable a service from starting on boot:
<code><span style="Color:DodgerBlue">sudo systemctl disable apache2
</span></code>#
# Enable a service to start on boot:
<code><span style="Color:DodgerBlue">sudo systemctl enable apache2
</span></code>#
# Restart a service:
<code><span style="Color:DodgerBlue">sudo systemctl restart apache2
</span></code>#
# Reload the configuration of a running service without restarting it:
<code><span style="Color:DodgerBlue">sudo systemctl reload apache2
</span></code>#
# Show a service's dependencies:
<code><span style="Color:DodgerBlue">systemctl list-dependencies apache2
</span></code>#
# List all loaded units (services, sockets, targets, etc.):
<code><span style="Color:DodgerBlue">systemctl list-units
</span></code>#
# List failed units (units that failed to start):
<code><span style="Color:DodgerBlue">systemctl --failed
</span></code>#
# Display detailed information about a unit, including its configuration:
<code><span style="Color:DodgerBlue">systemctl show apache2
</span></code>#
# Mask a unit (prevent it from being started):
<code><span style="Color:DodgerBlue">sudo systemctl mask apache2
</span></code>#
# Unmask a previously masked unit:
<code><span style="Color:DodgerBlue">sudo systemctl unmask apache2
</span></code>#
# Enter rescue mode for system maintenance:
<code><span style="Color:DodgerBlue">sudo systemctl rescue
</span></code>#
# Enter emergency mode for critical system recovery:
<code><span style="Color:DodgerBlue">sudo systemctl emergency
</span></code>#      
<B><span style="Font-Family:Verdana">#-- 2.2. journalctl
</B></span># journalctl is a command-line utility that provides access to the logs
# generated by the journal facility in the systemd system and service manager.
# On Debian and Ubuntu systems, journalctl is commonly used to query and display
# messages from the journal.
#
# View the journal
<code><span style="Color:DodgerBlue">sudo journalctl
</span></code>#
# View the journal for a systemd unit or target
#
<code><span style="Color:DodgerBlue">sudo journalctl -u apache2.service
</span></code>#
# Filtering by time. 
# Show logs from the last 30 minutes
<code><span style="Color:DodgerBlue">sudo journalctl --since "30 minutes ago"
</span></code>#
# Show logs from a specific date and time range
<code><span style="Color:DodgerBlue">sudo journalctl --since "2024-01-01 08:00:00" --until "2024-01-01 12:00:00"
</span></code>#
# See live journal (Ctrl-C to quit)
<code><span style="Color:DodgerBlue">sudo journalctl -f
</span></code>#
# Display logs for the current boot
<code><span style="Color:DodgerBlue">sudo journalctl --boot
</span></code>#
# View kernel messages
<code><span style="Color:DodgerBlue">sudo journalctl -k
</span></code>#
# Export journal entries to a file
<code><span style="Color:DodgerBlue">sudo journalctl &gt; journal.log
</span></code>#
# Change output format to Json
<code><span style="Color:DodgerBlue">sudo journalctl -o json
</span></code>#
# Filter by priority (e.g., emerg, alert, crit, err, warning, notice, info, 
# debug).
#
<code><span style="Color:DodgerBlue">sudo journalctl -p err
</span></code>#
# View logs for a specific Process ID
<code><span style="Color:DodgerBlue">sudo journalctl _PID=1234
</span></code>#
# Clear the journal
<code><span style="Color:DodgerBlue">sudo journalctl --vacuum-size=50M
</span></code>#
# - The size of the journal can be managed through the SystemMaxUse and
# RuntimeMaxUse options in the /etc/systemd/journald.conf configuration file.
#
<B><span style="Font-Family:Verdana">#-- 2.3. systemd-analyze
</B></span># The systemd-analyze command is part of the systemd suite, and it is used to
# analyze and display information about the system's boot and initialization
# process. It provides insights into how long the system took to boot, the time
# spent by individual services, and other related information.
#
# Basic Boot Time Information
<code><span style="Color:DodgerBlue">systemd-analyze
</span></code>#
# Display the chain of units that took the most time during boot.
<code><span style="Color:DodgerBlue">systemd-analyze critical-chain
</span></code>#
# Show the time taken by each service during boot, sorted by the time taken.
<code><span style="Color:DodgerBlue">systemd-analyze blame
</span></code>#
# Generate a SVG plot of the time spent by each unit during boot.
<code><span style="Color:DodgerBlue">systemd-analyze plot &gt; plot.svg
</span></code>#
# Display security-relevant information about the system's boot.
<code><span style="Color:DodgerBlue">systemd-analyze security
</span></code>#
# Create a detailed graphical representation of time usage for different units.
<code><span style="Color:DodgerBlue">systemd-analyze plot &gt; plot.svg
</span></code>#
<B><span style="Font-Family:Verdana">#-- 2.4. hostnamectl
</B></span># The hostnamectl command is part of the systemd suite and is used for querying
# and changing the system hostname and related settings on Linux systems. It
# provides a convenient way to manage the system's hostname and view additional
# information about the system.
#
# Display information about the system's hostname and related settings
<code><span style="Color:DodgerBlue">hostnamectl
</span></code>#
# This command provides information such as the static hostname, transient
# hostname, icon name, chassis type, and more.
#
# Set the static hostname (the system's fully qualified domain name)
<code><span style="Color:DodgerBlue">sudo hostnamectl set-hostname your-new-hostname
</span></code>#
# Set the transient hostname. The transient hostname is a runtime hostname
# that is set temporarily and may not persist after a reboot.
<code><span style="Color:DodgerBlue">sudo hostnamectl set-hostname --transient your-temporary-hostname
</span></code>#
# Set the pretty hostname. The pretty hostname is a free-form UTF-8 encoded
# string describing the host.
<code><span style="Color:DodgerBlue">sudo hostnamectl set-hostname --pretty "Your Pretty Hostname"
</span></code>#
# Check hostname status.
<code><span style="Color:DodgerBlue">hostnamectl status
</span></code>#
<B><span style="Font-Family:Verdana">#-- 2.5. loginctl
</B></span># The loginctl command is a part of the systemd suite and is used for
# introspecting and interacting with the state of the systemd login manager. 
# It provides information about user sessions, seats, and the status of the 
# user manager. Here are some common uses of the loginctl command:
#
# Display a list of current user sessions
<code><span style="Color:DodgerBlue">loginctl list-sessions
</span></code>#
# Display a list of seats
<code><span style="Color:DodgerBlue">loginctl list-seats
</span></code>#
# Displaying session properties
<code><span style="Color:DodgerBlue">loginctl show-session SESSION_ID
</span></code>#
# Displaying seat properties
<code><span style="Color:DodgerBlue">loginctl show-seat SEAT_NAME
</span></code>#
# Show information about the user manager
<code><span style="Color:DodgerBlue">loginctl show-user USER_NAME
</span></code>#
# Display a list of processes associated with a specific session:
<code><span style="Color:DodgerBlue">loginctl session-status SESSION_ID
</span></code>#
# Terminate a specific user session:
<code><span style="Color:DodgerBlue">loginctl terminate-session SESSION_ID
</span></code>#
# Display a list of user session IDs:
<code><span style="Color:DodgerBlue">loginctl list-users
</span></code>#
<B><span style="Font-Family:Verdana">#-- 2.6. localectl
</B></span># localectl is a command-line utility in the systemd suite that allows you to
# query and change system locale and keyboard layout settings on Linux systems.
# It provides a convenient way to manage and inspect the system's locale-related
# configurations.
#
# Show the current system locale settings.
<code><span style="Color:DodgerBlue">localectl
</span></code>#
# Show a list of available locales that can be set on the system.
<code><span style="Color:DodgerBlue">localectl list-locales
</span></code>#
# Set the system locale.
<code><span style="Color:DodgerBlue">sudo localectl set-locale LANG=en_US.UTF-8
</span></code>#
# Display a concise status summary, including locale and keyboard layout 
# information.
<code><span style="Color:DodgerBlue">localectl status
</span></code># 
<B><span style="Font-Family:Verdana">#-- 2.7. systemd-ask-password
</B></span># The systemd-ask-password command is part of the systemd suite and is used
# for querying the user for authentication-related information, such as
# passwords or passphrases, in a secure and standardized way. It is often used
# in conjunction with various systemd services or components that may need to
# request passwords during the system boot process or at runtime.
#
# Some key aspects of systemd-ask-password:
#
# - Usage: The command is typically used by other systemd components or services
# to request passwords interactively.
#
# - Invocation: systemd-ask-password is usually invoked by other systemd
# components or services and may not be used directly by users from the command
# line.
#
# - Systemd Components Using systemd-ask-password: Components like 
# systemd-cryptsetup, which handles encrypted disk volumes, or services
# requiring authentication during boot, may use systemd-ask-password to prompt
# the user for passwords in a secure manner.
#
# - Modes: systemd-ask-password supports different modes of operation, such as
# prompting the user on the console, querying a password agent, or sending the
# password request to a wall message.
#
# - Password Agents: In some cases, systemd-ask-password may communicate with a
# password agent, such as systemd-tty-ask-password-agent, to handle password
# requests. This allows for a more flexible and secure way of handling
# passwords, especially in non-interactive or headless environments.
#
# - Communication: Communication between systemd-ask-password and password
# agents is done through file descriptors, ensuring a secure and reliable means
# of passing sensitive information.
#
# - Security: systemd-ask-password is designed to handle password prompts
# securely, ensuring that passwords are not inadvertently leaked or exposed
# during the authentication process.
#
# Wall Message: The --wall option can be used to send a wall message (broadcast
# message to all users) requesting a password.
<code><span style="Color:DodgerBlue">systemd-ask-password --wall "Please enter the encryption password:"
</span></code>#   
# This might be used by services like disk decryption to inform users about the
# need for a password.
#
# - Integration with Other Tools: systemd-ask-password is often part of a larger
# workflow involving other systemd tools and services, especially those related
# to system initialization, encryption, or authentication.
# 
# - Examples of Use:
# Password requests during disk decryption.
# Password requests for encrypted home directories.
# Authentication requests for services during runtime.
#
<B><span style="Font-Family:Verdana">#-- 2.8. systemd-cat
</B></span># systemd-cat is a command-line utility that is part of the systemd suite. Its
# primary purpose is to concatenate and print messages to the journal, which is
# managed by systemd-journald. The journal is a central component of systemd
# that collects and stores log messages from various sources, making it a
# centralized and structured logging system.
#
# Can be used as a prefix to other commands or scripts to capture their output
# and send it to the journal.
<code><span style="Color:DodgerBlue">systemd-cat echo "Hello, systemd!"
</span></code>#   
# Redirect the standard output and standard error of a command or script to the
# journal.
<code><span style="Color:DodgerBlue">systemd-cat -p info ls /etc
</span></code>#   
# Set message priority. The priority levels include "emerg," "alert," "crit,"
# "err," "warning," "notice," "info," and "debug."
<code><span style="Color:DodgerBlue">systemd-cat -p err echo "An error occurred."
</span></code>#   
# Logging from ccripts
<code><span style="Color:DodgerBlue">echo "Script is running." | systemd-cat
</span></code>#   
# you can use journalctl to retrieve and filter these messages.
<code><span style="Color:DodgerBlue">journalctl _SYSTEMD_UNIT=echo.service
</span></code>#
<B><span style="Font-Family:Verdana">#-- 2.9. systemd-cgls
</B></span># The systemd-cgls command is a utility in the systemd suite used for listing
# and displaying the hierarchy of control groups (cgroups) on a Linux system.
# Control groups are a feature of the Linux kernel that enables the organization
# and management of processes into hierarchical groups with resource constraints
# and accounting.
#
# - systemd-cgls is primarily used to visualize the hierarchy of control groups
# and their relationships. It provides a tree-like representation of the cgroup
# hierarchy.
<code><span style="Color:DodgerBlue">systemd-cgls
</span></code>#
# - The output of systemd-cgls shows the control groups arranged in a tree
# structure, indicating the parent-child relationships. Each line represents a
# cgroup, and indentation indicates the hierarchy.
#
# Example simplified output:
<code><span style="Color:MediumSeaGreen"> └─user.slice
   ├─user-1000.slice
   │ ├─session-c1.scope
   │ │ └─1337 sshd: johndoe@pts/0
   │ └─session-c2.scope
   │   ├─1445 bash
   │   ├─1452 systemd-cgls
   │   └─1453 less
   └─user-2000.slice
 └─session-c3.scope
   └─1555 sshd: janedoe@pts/1
</span></code>#
<B><span style="Font-Family:Verdana">#-- 2.10. systemd-cgtop
</B></span># systemd-cgtop is a tool that provides a real-time, dynamic view of the
# resource usage of systemd control groups (cgroups) on a Linux system. It is
# part of the systemd suite and allows users to monitor the resource consumption
# of different units, services, and slices managed by systemd.
#
# Run `systemd-cgtop` with default settings:
<code><span style="Color:DodgerBlue">sudo systemd-cgtop
</span></code>#
# This will display real-time statistics for all control groups.
#
# Quits displaying after 5 updates.
<code><span style="Color:DodgerBlue">sudo systemd-cgtop -n 5
</span></code>#
# Display tree view
<code><span style="Color:DodgerBlue">sudo systemd-cgtop -t
</span></code>#
<B><span style="Font-Family:Verdana">#-- 2.11. systemd-delta
</B></span># The systemd-delta command is part of the systemd suite and is used to display
# the differences between configuration files provided by different packages and
# the runtime configuration of the system. It helps identify changes made to the
# default systemd configuration by administrators or other packages on the
# system.
#
# When you run systemd-delta, it scans the system's configuration directories
# and compares the shipped configuration files from packages with the runtime
# configuration on the system. It then displays the differences.
#
# systemd-delta scans several directories for configuration files, including 
# /etc/systemd/, /run/systemd/, and /usr/lib/systemd/.
#
# Changes made by administrators are marked with +/ (additions) or !
# (modifications). 
# Changes made by packages are marked with +/ (additions) or -/ (deletions).
#
# List all changes made to systemd unit files and configuration files:
<code><span style="Color:DodgerBlue">sudo systemd-delta
</span></code># 
# Display changes in a specific directory (e.g., `/etc/systemd/system/`):
<code><span style="Color:DodgerBlue">sudo systemd-delta /etc/systemd/system/
</span></code>#
<B><span style="Font-Family:Verdana">#-- 2.12. systemd-detect-virt
</B></span># The `systemd-detect-virt` command is a part of the systemd suite, and it is
# used to detect the type of virtualization technology or hypervisor that a
# Linux system is currently running on. This can be useful in scripts or system
# initialization routines where the behavior might need to be adjusted based on
# whether the system is running on physical hardware or within a virtualized
# environment.
#
# The command is typically used in shell scripts or systemd service files to
# conditionally execute specific actions based on the detected virtualization
# type.
<code><span style="Color:DodgerBlue">systemd-detect-virt
</span></code>#
# The command outputs the detected virtualization type or "none" if no 
# virtualization is detected.
#
# qemu       : QEMU or KVM
# kvm        : KVM (Kernel-based Virtual Machine)
# vmware     : VMware
# oracle     : Oracle VM VirtualBox
# microsoft  : Microsoft Hyper-V
# xen        : Xen
# bochs      : Bochs
# uml        : User-Mode Linux
# parallels  : Parallels
#
# Using systemd-detect-virt in a script
<code><span style="Color:MediumSeaGreen">if &lsqb; "$(systemd-detect-virt)" = "qemu" &rsqb;; then
  echo "Running on QEMU/KVM"
else
  echo "Not running on QEMU/KVM"
fi
</span></code># 
# Exit Codes:
# 0: Detected virtualization. The detected virtualization type will be printed
# to stdout.
# 1: No virtualization detected.
# 2: Invalid or missing arguments.
#
<B><span style="Font-Family:Verdana">#-- 2.13. systemd-escape
</B></span># The systemd-escape command is a utility that comes with the systemd suite.
# It is used to escape strings, making them suitable for use as filenames, unit
# names, or other identifiers in the systemd ecosystem. This is particularly
# useful for generating valid and safe names for systemd units, files, and other
# resources.
#
# Escapes special characters in the input string, replacing them with safe
# alternatives. For example, slashes ("/") might be replaced with dashes ("-").
#
<code><span style="Color:DodgerBlue">systemd-escape "My Service"
</span></code>#   
# Output:
<code><span style="Color:MediumSeaGreen">My\x20Service
</span></code>#
<B><span style="Font-Family:Verdana">#-- 2.14. systemd-inhibit
</B></span># The systemd-inhibit command is a part of the systemd suite, and it is used to
# inhibit the system from certain actions or events for the duration of a
# specified command or until the command exits. This is useful for preventing
# actions that might interfere with a running operation or task. The command is
# commonly employed to avoid disruptions during critical processes like software
# installations, backups, or presentations.
#
# - Command Syntax: The basic syntax for systemd-inhibit is as follows:
<code><span style="Color:DodgerBlue">systemd-inhibit &lsqb;OPTIONS&rsqb; COMMAND
</span></code>#     
# - Options: Various options can be used to specify the actions to be inhibited
# and other properties. Some common options include:
# --what=EVENT: Specifies the event to inhibit (e.g., sleep, shutdown).
# --why=REASON: Provides a human-readable reason for the inhibition.
# --mode=MODE: Specifies the inhibition mode (e.g., block, delay, fail).
#
# - Example Usage:
# Inhibit shutdown while a backup operation is in progress:
<code><span style="Color:DodgerBlue">sudo systemd-inhibit --what=shutdown --why="Backup in progress" \
</span></code><code><span style="Color:DodgerBlue">    my_backup_script.sh
</span></code>#
# Inhibit sleep while a presentation is running:
<code><span style="Color:DodgerBlue">sudo  systemd-inhibit --what=sleep --why="Presentation in progress" \
</span></code><code><span style="Color:DodgerBlue">    my_pres_command
</span></code>#     
# - Inhibition Modes:
# block: Blocks the action until the command exits.
# delay: Delays the action until the command exits.
# fail: Fails the command if the action cannot be inhibited.
#
# - Listing Current Inhibitions: You can use the --list option to display the
# currently active inhibitions.
<code><span style="Color:DodgerBlue">systemd-inhibit --list
</span></code>#     
<B><span style="Font-Family:Verdana">#-- 2.15. systemd-machine-id-setup
</B></span># systemd-machine-id-setup is a command-line tool in the systemd suite used to
# initialize or regenerate the machine ID on a Linux system. The machine ID is a
# unique identifier associated with a specific installation of an operating
# system. It is often used by various system components and applications to
# distinguish between different systems.
#
# - The machine ID is stored in the /etc/machine-id file. It is a 32-character
# hexadecimal string that uniquely identifies the system. Applications and
# services often use the machine ID for various purposes, such as generating
# unique identifiers or ensuring system-specific configurations.
#
# - During the first boot of a Linux system, systemd-machine-id-setup is
# typically called to generate a random machine ID and store it in 
# /etc/machine-id.
#
# - If, for any reason, the machine ID needs to be regenerated (for example, in
# the case of system cloning or copying an installation), administrators can run
# systemd-machine-id-setup to create a new machine ID.
<code><span style="Color:DodgerBlue">sudo systemd-machine-id-setup
</span></code>#
# This command generates a new machine ID and updates the /etc/machine-id file.
#
# - In scenarios where system images are cloned or deployed to multiple
# machines, it's essential to regenerate the machine ID on each cloned system
# using systemd-machine-id-setup to ensure uniqueness.
#
# - While systemd-machine-id-setup is the recommended way to manage the machine
# ID, the /etc/machine-id file can also be edited manually. However, it's
# generally advised to use the provided tools to avoid potential issues.
#
<B><span style="Font-Family:Verdana">#-- 2.16. systemd-mount
</B></span># systemd-mount is a command-line tool that is part of the systemd suite, and it
# is used for mounting and unmounting file systems. It provides a convenient
# interface to mount and manage various types of filesystems and network shares.
# The utility is designed to work with systemd's broader system and service
# management capabilities.
#
# Can be used to mount network file systems like NFS or SMB.
<code><span style="Color:DodgerBlue">sudo systemd-mount -t nfs server:/export /mnt/nfs
</span></code>#   
# - To unmount a filesystem, use the --umount option.
<code><span style="Color:DodgerBlue">sudo systemd-mount --umount /mnt/data
</span></code>#
# - Mounts managed by systemd-mount are often associated with systemd mount
# units, providing additional control and configuration options.
#
<B><span style="Font-Family:Verdana">#-- 2.17. systemd-notify
</B></span># systemd-notify is a command-line utility provided by the systemd init system. 
# It allows a service or script to notify systemd about its status and readiness.
# This tool is often used by long-running services to signal when they have
# completed initialization or specific milestones. It's a way for services to
# communicate with systemd and integrate with the overall service management
# infrastructure.
#
# When a service uses systemd-notify, it sends signals to systemd, allowing
# systemd to track the service's progress and readiness. This information is
# valuable for systemd's dependency tracking and ordering of services during
# startup.
#
# Example in a Service Unit:
<code><span style="Color:MediumSeaGreen">&lsqb;Service&rsqb;
Type=simple
ExecStart=/path/to/myservice
ExecStartPost=/bin/systemd-notify --ready
</span></code>#
# In this example, myservice is expected to call systemd-notify --ready after it
# has completed its initialization.
#
<B><span style="Font-Family:Verdana">#-- 2.18. systemd-path
</B></span>#
# The systemd-path command is a part of the systemd suite, and it provides a 
# way to query various system and user paths managed by systemd. It allows you
# to retrieve information about directories, files, and other paths that systemd
# uses or manages. This command is typically used for scripting or querying
# system information in a consistent manner.
#
# Print the system and users path 
<code><span style="Color:DodgerBlue">systemd-path 
</span></code>#
<B><span style="Font-Family:Verdana">#-- 2.19. systemd-run
</B></span># systemd-run is a systemd command-line tool that allows users to run transient
# systemd services and service units. It provides a simple way to create and
# manage temporary or one-shot services without the need to write custom unit
# files. This can be useful for testing, ad-hoc tasks, or running short-lived
# processes.
#
# Unlike traditional systemd services, using systemd-run does not require 
# writing and managing unit files. Instead, the user provides the command to 
# be executed directly on the command line.
#
# Transient units created by systemd-run are isolated from the calling terminal,
# and they run in their own scope. This helps prevent interference with other
# services or processes.
#
# Transient services created by systemd-run can be of different types, such as
# simple services (--service-type=simple), forking services 
# (--service-type=forking), or executed directly (--service-type=exec).
#
# Once the transient service completes, systemd-run provides information about
# the service's exit status, runtime, and resource usage.
#
# Transient services created by systemd-run are automatically cleaned up once
# the service completes, making it suitable for short-lived tasks.
#
# Execute the `echo` command within a transient service.
<code><span style="Color:DodgerBlue">sudo systemd-run echo "Hello, systemd-run!"
</span></code>#
# This example uses the `--pipe` option to capture the output, and `--collect`
# to ensure that the transient service's logs are collected and stored.
<code><span style="Color:DodgerBlue">sudo systemd-run --pipe --collect echo "Capturing output in journal logs"
</span></code><code><span style="Color:DodgerBlue">sudo journalctl -b -u transient-*.scope
</span></code>#
# This example sets a CPU time quota of 50% and a memory limit of 100 megabytes
# for the transient service.
<code><span style="Color:DodgerBlue">sudo systemd-run --unit=my-service --service-type=exec --property=CPUQuota=50% \
</span></code><code><span style="Color:DodgerBlue">   --property=MemoryLimit=100M -- /path/to/executable
</span></code>#
# Run a command as a specific user:
<code><span style="Color:DodgerBlue">sudo systemd-run --uid=username --gid=groupname command-to-be-executed
</span></code>#
# This example uses `--scope` to create a transient service in the background
# and runs the `sleep` command for 300 seconds.
<code><span style="Color:DodgerBlue">sudo systemd-run --scope --unit=my-background-service sleep 300
</span></code>#
# 
<B><span style="Font-Family:Verdana">#-- 2.20. systemd-socket-activate
</B></span># systemd-socket-activate is a utility within the systemd suite that facilitates
# socket-based activation for services. Socket activation is a mechanism that
# allows services to be started on-demand when a connection is made to a
# specific network socket. This approach helps improve system efficiency by
# delaying the initialization of services until they are actually needed.
#
# Socket activation is an alternative to the traditional method of starting
# services at boot time. Instead of having services running continuously in the
# background, services are started dynamically when a connection is made to a
# specific socket.
#
# In systemd, a socket unit is defined to represent a network socket. When a
# connection is made to this socket, systemd activates the associated service.
#
<B><span style="Font-Family:Verdana">#-- 2.21. systemd-stdio-bridge
</B></span># systemd-stdio-bridge is a utility provided by the systemd suite, designed to 
# act as a bridge between standard input/output streams and a client-server
# architecture. It facilitates communication between a traditional (non-systemd)
# daemon that expects input/output on standard input/output and a systemd
# service that runs in a separate process.
#
# systemd-stdio-bridge is used to adapt daemons that are not originally designed
# to work with systemd socket activation. It allows these daemons to be 
# socket-activated by systemd.
#
# When a daemon is adapted to use systemd-stdio-bridge, systemd creates a socket
# for the daemon and starts systemd-stdio-bridge as a separate process. The
# bridge connects the standard input/output of the daemon to the socket,
# allowing it to communicate with clients through the socket.
</pre> </div> </p>
</pre> </div> </p>
<br /><br /><br /><script>
function myFunction(divid) {
  var x = document.getElementById(divid);
  if (x.style.display === "none") {
    x.style.display = "block";
  } else {
    x.style.display = "none";
  }
}
var i;
var str;

for (i=1; i<18; i++) {
    str = "Div" + i.toString();
    myFunction(str);
}
</script></body> </html>